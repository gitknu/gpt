<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Як створити GPT</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Updated to include font-weight 800 for extrabold -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;800&display=swap" rel="stylesheet">
<style>
/* --- ALL CSS is unchanged --- */
    body, html {
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: white;
        display: flex;
        flex-direction: column; /* Stack items vertically */
        justify-content: space-between; /* Pushes top content to top, logos to bottom */
        font-family: sans-serif;
        box-sizing: border-box; /* Ensure padding/borders don't add to height */
    }

    /* --- START: Top Content Styles --- */

    /* New container for the title and scroller */
    .top-group {
        /* CHANGED: Removed margins, added padding, set to full width */
        width: 100%;
        padding: 0 40px;
        /* --- CHANGED: Raised header --- */
        margin-top: 20px;
        box-sizing: border-box; /* Include padding in width */
        display: flex;
        flex-direction: column;
        /* REMOVED: align-self: flex-start; */
        align-items: flex-start; /* ADDED: This makes all children left-align by default */
    }

    /* REMOVED: .top-group.right block */

    /* New title style */
    .data-title-container {
        font-family: 'Montserrat', sans-serif;
        color: black;
        margin: 0;
        height: 86px; /* 1/7th of original 600px */
        display: flex;
        flex-direction: column;
        justify-content: center; /* Vertically center the text block */
        overflow: hidden; /* Added to clip the text during transition */
        /* --- CHANGED: Removed cursor pointer --- */
        /* cursor: pointer; */
        user-select: none; /* ADDED: Prevent text selection on click */
        align-self: center; /* CHANGED: Center the title block */
        align-items: center; /* ADDED: Center the text lines inside */
    }

    .title-en {
        font-weight: 800; /* Extrabold */
        font-size: 2rem; /* 32px */
        line-height: 1.2;
        white-space: nowrap; /* Prevent wrapping */
        color: #b80000; /* Added requested color */
        /* Updated transition for opacity and transform */
        transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
    }

    .title-ua {
        font-weight: 800; /* Extrabold - CHANGED */
        font-size: 1.1rem; /* 17.6px - CHANGED (adjusted to match width with new weight) */
        line-height: 1.2;
        white-space: nowrap; /* Prevent wrapping */
        /* Updated transition for opacity and transform */
        transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
    }

    /* --- ADDED: Style for new hint text --- */
    .scroller-hint {
        font-family: 'Montserrat', sans-serif;
        font-weight: 500; /* Not bold, as requested */
        font-size: 0.675rem; /* 75% of original 0.9rem */
        color: #cccccc; /* Barely visible grey color */
        margin-top: 8px; /* Space from title */
        margin-bottom: 0; /* No extra space, scroller has its own */
        align-self: center;
        text-align: center;
        user-select: none;
    }

    /* --- START: Scroller Styles --- */
    .scroller-container {
        /* Margins are now on the parent .top-group */
        /* margin-left: 0; */ /* This is now controlled below for animation */
        /* --- CHANGED: Reduced top margin --- */
        margin-top: 10px;
        height: 514px; /* 6/7ths of original 600px */

        /* --- START OF CHANGES --- */
        width: 9px; /* CHANGED: Set to max width for interaction area */
        background-color: transparent; /* CHANGED: Container is no longer the line */

        /* --- START OF FIX: Removed padding --- */
        /* padding-left: 10px; */
        /* padding-right: 10px; */
        /* Total width is now 9px */
        /* --- END OF FIX --- */

        /* --- END OF CHANGES --- */

        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        position: relative;
        flex-shrink: 0; /* Prevents scroller from shrinking */

        /* REMOVED: width transition */
        transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1);
        transform: translateX(0); /* ADDED: Default "left" position */
    }

    /* --- ADDED: This is the thin, base line --- */
    .scroller-container::before {
        content: '';
        position: absolute;
        width: 4px;
        height: 100%;
        background-color: black;
        /* This still works: 50% of the 9px container is the center */
        left: 50%;
        transform: translateX(-50%);
        z-index: 1;
    }

    /* --- REMOVED: #thick-line-segment --- */

    /* --- ADDED: Style for individual segments --- */
    .thick-segment {
        position: absolute;
        width: 4px; /* Start at thin width */
        background-color: black;
        /* This still works: 50% of the 9px container is the center */
        left: 50%;
        transform: translateX(-50%);
        z-index: 2; /* Above thin line */
        height: 0; /* Controlled by JS */
        top: 0; /* Controlled by JS */

        /* --- CRITICAL: ONLY transition width --- */
        /* --- CHANGED: Faster transition --- */
        transition: width 0.3s cubic-bezier(0.65, 0, 0.35, 1);
    }

    /* --- ADDED: Active state animates width --- */
    .thick-segment.active {
        width: 9px; /* Animate to thick width */
    }

    /* REMOVED: .scroller-container.dragging { ... } rule */

    /* ADDED: Rule to move *only* the scroller */
    .scroller-container.right {
        /* --- START OF FIX: Reverted 29px to 9px --- */
        /* CHANGED: Use 9px (the original container width) in calculation */
        transform: translateX(calc(100vw - 80px - 9px));
        /* --- END OF FIX --- */
    }

    /* REMOVED: .scroller-container.right.dragging rule (no longer needed) */

    .dot {
        width: 20px; /* Doubled from 10px */
        height: 20px; /* Doubled from 10px */
        background-color: black;
        border-radius: 50%;
        flex-shrink: 0;

        /* --- ADDED: z-index --- */
        position: relative; /* Required for z-index */
        z-index: 3; /* Above thick line */
    }

    /* --- REMOVED --- */
    /* Removed the .scroller-container.dragging .dot { opacity: 0; } rule */

    #scroller-handle {
        width: 36px; /* This is the outer black dot */
        height: 36px;
        background-color: black; /* CHANGED: This is now the black dot */
        border-radius: 50%;
        position: absolute;
        /* This still works: 50% of the 9px container is the center */
        left: 50%;

        /* --- START OF EDITS --- */
        /* ADDED: scale(1) to animate from */
        transform: translate(-50%, -50%) scale(1);
        cursor: grab;

        /* CHANGED: ADDED transform back to the transition */
        /* --- CHANGED: Faster transition --- */
        transition: top 0.4s cubic-bezier(0.65, 0, 0.35, 1),
                    transform 0.3s cubic-bezier(0.65, 0, 0.35, 1);

        /* REMOVED: border: 9px solid black; */
        box-sizing: border-box;

        /* ADDED: Centering for the pseudo-element */
        display: flex;
        justify-content: center;
        align-items: center;

        z-index: 4; /* --- ADDED: Topmost element --- */
        /* --- END OF EDITS --- */
    }

    /* --- ADDED: This is the blue "liquid" --- */
    #scroller-handle::before {
        content: '';
        display: block;
        /* Size calculation: 36px (parent) - 9px (original border) * 2 = 18px */
        width: 18px;
        height: 18px;
        background-color: #0b5394; /* The blue liquid */
        border-radius: 50%;

        /* ADDED: Transition for the liquid's transform */
        transform: scale(1);
        /* --- CHANGED: Faster transition --- */
        transition: transform 0.3s cubic-bezier(0.65, 0, 0.35, 1);
    }


    /* Class for the "shrunken" state while dragging */
    #scroller-handle.grabbing {
        /* This squishes the black dot horizontally ONLY */
        transform: translate(-50%, -50%) scaleX(0.25) scaleY(1);
        cursor: grabbing;
    }

    /* --- MODIFIED: This is the "at dot" state --- */
    #scroller-handle.grabbing::before {
        /* scaleX(2) -> 9px width */
        /* scaleY(0.5) -> 9px height (to match 9px width) */
        transform: scaleX(2) scaleY(0.5);
    }

    /* --- ADDED: This is the "flowing" state --- */
    #scroller-handle.grabbing.flowing::before {
        /* scaleX(2) -> 9px width */
        /* scaleY(2.0) -> 36px height (to "flow") */
        transform: scaleX(2) scaleY(2.0);
    }

    #scroller-handle:active {
        cursor: grabbing;
    }
    /* --- END: Scroller Styles --- */


    .logo-container {
        display: flex;
        flex-direction: row; /* Aligns logo items in a row */
        align-items: flex-end; /* Aligns items based on their bottom edge */
        gap: 20px; /* space between logo items */
        margin-bottom: 20px; /* Adds space from the bottom edge */
        width: 100%; /* Added to allow centering */
        justify-content: center; /* Added to center the logos */
    }

    .logo-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .logo-label {
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
        font-size: 16px;
        color: #333;
        margin-bottom: 10px; /* Space between text and logo */
    }

    .logo-link {
        display: inline-block;
    }

    .logo {
        width: 150px; /* Adjust size as needed */
        height: auto;
        transition: transform 0.2s ease-in-out;
    }

    .logo:hover {
        transform: scale(1.1);
    }

    /* --- Mobile Responsivity --- */
    @media (max-width: 600px) {

        /* Adjust top group for mobile */
        .top-group {
            /* CHANGED: Use padding instead of margin */
            padding: 0 20px;
            /* --- CHANGED: Raised higher --- */
            margin-top: 10px;
            /* align-self: flex-start is inherited */
        }

        /* REMOVED: .top-group.right media query */

        /* Adjust title for mobile */
        .data-title-container {
            height: 57px; /* 1/7th of original 400px */
        }

        .title-en {
            font-size: 1.5rem; /* 24px */
        }

        .title-ua {
            /* Font weight is inherited from the main rule (800) */
            font-size: 0.83rem; /* 13.28px - CHANGED (adjusted to match mobile width with new weight) */
        }

        /* --- ADDED: Mobile hint styles --- */
        .scroller-hint {
            font-size: 0.6rem; /* 75% of 0.8rem */
            margin-top: 4px;
        }

        .scroller-container {
            /* Margins are now on the parent .top-group */
            /* REMOVED: margin-left: 0; (This would break the .right state on mobile) */
            /* --- CHANGED: Reduced margin --- */
            margin-top: 10px;
            height: 343px; /* 6/7ths of original 400px */
            /* The transition and margin-left/right rules are inherited */
            /* The padding: 0 10px; is inherited */
        }

        /* .scroller-container.right { margin-left: auto; margin-right: 0; } is inherited */
        /* ADDED: Override transform for mobile */
        .scroller-container.right {
            /* --- START OF FIX: Reverted 29px to 9px --- */
            /* 100vw (full width) - 40px (20px L/R padding) - 9px (original container width) */
            transform: translateX(calc(100vw - 40px - 9px));
            /* --- END OF FIX --- */
        }

        /* REMOVED: .scroller-container.right.dragging rule */

        .dot {
            width: 16px; /* Doubled from 8px */
            height: 16px; /* Doubled from 8px */
            /* transition: opacity... is inherited from the base .dot rule */
        }

        #scroller-handle {
            width: 24px; /* CHANGED: Reduced from 36px (approx 7% of 343px) */
            height: 24px; /* CHANGED: Reduced from 36px (approx 7% of 343px) */

            /* --- REMOVED --- */
            /* border-width: 7px; */
            /* --- END REMOVED --- */

            /* The .grabbing class and transitions are inherited */
        }

        /* --- ADDED: Mobile size for blue liquid --- */
        #scroller-handle::before {
            /* Size calculation: 24px (parent) - 7px (original border) * 2 = 10px */
            width: 10px;
            height: 10px;
        }

        /* The .grabbing::before, .grabbing.flowing::before transforms are inherited */

        .logo-container {
            width: 100%;
            box-sizing: border-box; /* Ensures padding doesn't add to the total width */
            padding: 0 20px 20px; /* 0 for top, 20px for left/right, 20px for bottom */
            margin-bottom: 0; /* Bottom spacing is now handled by padding */
            justify-content: center; /* This was already here and correct */
            gap: 15px; /* Adjust the gap for smaller screens */
        }
        .logo {
            width: 90px; /* Logos size on mobile */
        }
        .logo-label {
            font-size: 14px; /* Slightly smaller text on mobile */
        }
    }
</style>
</head>
<body>

<!-- Top content group -->
<div class="top-group">
    <!-- Updated title structure -->
    <div class="data-title-container">
        <!-- This text will be updated by the script -->
        <!-- Set initial text to Level 1 (which is now at the bottom) -->
        <span class="title-en">Data collection:</span>
        <span class="title-ua">процес збору даних</span>
    </div>

    <!-- --- ADDED: New hint text --- -->
    <p class="scroller-hint"><i>можна потягнути на інший бік екрану</i></p>

    <div class="scroller-container">
        <!-- ADDED: 6 segments for the 6 gaps between 7 dots -->
        <div class="thick-segment" id="segment-0"></div>
        <div class="thick-segment" id="segment-1"></div>
        <div class="thick-segment" id="segment-2"></div>
        <div class="thick-segment" id="segment-3"></div>
        <div class="thick-segment" id="segment-4"></div>
        <div class="thick-segment" id="segment-5"></div>

        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <!-- REMOVED: #thick-line-segment -->
        <div id="scroller-handle"></div>
    </div>
</div>

<!-- Logo content is placed here, positioned at the bottom by the body's flex settings -->
<div class="logo-container">
    <div class="logo-item">
        <p class="logo-label">Комп'ютер</p>
        <a href="https://ollama.com" target="_blank" class="logo-link">
            <img src="https://gitknu.github.io/gpt/files/ollama.png" alt="Ollama Logo" class="logo" onerror="this.onerror=null; this.src='https://placehold.co/150x150/eeeeee/aaaaaa?text=Ollama';">
        </a>
    </div>
    <div class="logo-item">
        <p class="logo-label">Смартфон</p>
        <a href="https://play.google.com/store/apps/details?id=com.pocketpalai" target="_blank" class="logo-link" id="pocketpal-link">
            <img src="https://gitknu.github.io/gpt/files/pocketpal.png" alt="PocketPal Logo" class="logo" onerror="this.onerror=null; this.src='https://placehold.co/150x150/eeeeee/aaaaaa?text=PocketPal';">
        </a>
    </div>
    <div class="logo-item">
        <p class="logo-label">Власна АІ</p>
        <a href="https://github.com/theaniketgiri/create-llm" target="_blank" class="logo-link">
            <img src="https://gitknu.github.io/gpt/files/github.png" alt="GitHub Logo" class="logo" onerror="this.onerror=null; this.src='https://placehold.co/150x150/eeeeee/aaaaaa?text=GitHub';">
        </a>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // --- START: PocketPal Link Logic ---
        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
        const pocketpalLink = document.getElementById("pocketpal-link");

        // Check for iOS/iPadOS
        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
            pocketpalLink.href = "https://apps.apple.com/us/app/pocketpal-ai/id6502579498";
        }
        // Check for MacOS
        else if (/Macintosh|MacIntel|MacPPC|Mac68K/.test(userAgent)) {
            pocketpalLink.href = "https://apps.apple.com/us/app/pocketpal-ai/id6502579498";
        }
        // --- END: PocketPal Link Logic ---

        // --- REMOVED: Side Toggle Logic ---
        // const titleContainer = document.querySelector('.data-title-container');
        const scrollerContainer = document.querySelector('.scroller-container');
        // --- END: Side Toggle Logic ---


        // --- START: Text Data for Scroller (INVERTED) ---
        const levelData = [
            // Index 0 (Top Dot) is now Level 7
            { en: "RLHF:", ua: "навчання по відгуках" },
            { en: "Reward model training:", ua: "створення моделі винагороди" },
            { en: "Supervised finetuning:", ua: "донавчання (зі вчителем)" },
            { en: "Unsupervised pretraining:", ua: "попереднє навчання (без вчителя)" },
            { en: "Tokenization:", ua: "розбиття на токени" },
            { en: "Preprocessing:", ua: "попередня обробка" },
            // Index 6 (Bottom Dot) is now Level 1
            { en: "Data collection:", ua: "процес збору даних" }
        ];

        const titleEn = document.querySelector('.title-en');
        const titleUa = document.querySelector('.title-ua');
        // Set initial level index to 6 (Bottom dot, which is now Level 1)
        let currentLevelIndex = 6; // Keep track of the current level
        let previousLevelIndex = 6; // --- ADDED: Keep track of previous dot
        // --- END: Text Data for Scroller ---


        // --- START: Scroller Logic ---
        const handle = document.getElementById('scroller-handle');
        const scroller = handle.parentElement; // This is the scroller-container
        const dots = Array.from(scroller.getElementsByClassName('dot'));
        // --- ADDED: Get all segments ---
        const segments = Array.from(scroller.getElementsByClassName('thick-segment'));
        // --- REMOVED: thickLine ---
        let isDragging = false;
        let flowTimer; // --- ADDED: Timer for flow animation

        // --- NEW DRAG LOGIC VARS ---
        let startX = 0;
        let startY = 0;
        let dragMode = 'none'; // 'none', 'pending', 'vertical', 'horizontal'
        // --- END NEW VARS ---

        const dotPositions = dots.map(dot => dot.offsetTop + dot.offsetHeight / 2);

        // Set initial position of the handle to the *last* dot (bottom)
        handle.style.top = `${dotPositions[dotPositions.length - 1]}px`;

        function startDrag(e) {
            isDragging = true;
            document.body.style.cursor = 'grabbing';

            previousLevelIndex = currentLevelIndex; // Store the starting point

            // --- NEW: Store start positions ---
            startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
            startY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;

            // --- MODIFIED: Detect drag target ---
            if (e.target === handle) {
                dragMode = 'pending'; // Handle can go vertical or horizontal
            } else {
                dragMode = 'horizontal'; // Clicks on line/dots default to horizontal
            }
            // --- END MODIFIED ---

            // --- NEW: Reset all segments on drag start ---
            segments.forEach((seg, i) => {
                seg.classList.remove('active');
                seg.style.height = '0px';
                // Set top position so it can shrink from the correct place if needed
                seg.style.top = `${dotPositions[i]}px`;
            });
        }

        function endDrag(e) {
            if (!isDragging) return;
            isDragging = false;
            dragMode = 'none'; // --- NEW ---
            document.body.style.cursor = 'default';

            // --- ADDED ---
            handle.classList.remove('grabbing'); // Remove class to grow handle
            handle.classList.remove('flowing'); // --- ADDED: Ensure flowing is removed
            clearTimeout(flowTimer); // --- ADDED: Clear any pending timer

            // --- NEW: Hide all segments on drag end ---
            // This makes them animate their width back to 4px and then hide
            segments.forEach((seg, i) => {
                seg.classList.remove('active');
                // After a delay (for width animation), hide height
                // --- CHANGED: Faster timeout ---
                setTimeout(() => {
                    if (!isDragging) { // Only hide if we are still not dragging
                         seg.style.height = '0px';
                         seg.style.top = handle.style.top; // Shrink to handle
                    }
                }, 300); // 300ms matches width transition
            });
        }

        function onDrag(e) {
            if (!isDragging) return;

            // --- NEW: Get current X and Y ---
            const currentX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
            const currentY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;

            if (dragMode === 'pending') {
                const deltaX = currentX - startX;
                const deltaY = currentY - startY;

                // Check for dominant axis after 10px of movement
                if (Math.abs(deltaY) > 10) {
                    dragMode = 'vertical';
                } else if (Math.abs(deltaX) > 10) {
                    dragMode = 'horizontal';
                } else {
                    return; // Wait for more movement
                }
            }

            // --- NEW: Handle vertical drag ---
            if (dragMode === 'vertical') {
                e.preventDefault(); // Prevent page scroll ONLY on vertical drag

                const eventY = currentY; // Use the calculated currentY
                const scrollerRect = scroller.getBoundingClientRect();

                const mouseY = eventY - scrollerRect.top;

                // Find the closest dot position to snap to
                let closestDotY = dotPositions.reduce((prev, curr) => {
                    return (Math.abs(curr - mouseY) < Math.abs(prev - mouseY) ? curr : prev);
                });

                // Snap the handle to the closest dot
                handle.style.top = `${closestDotY}px`;

                // --- START: Update Text Logic ---
                // Find the index of the closest dot
                let closestIndex = dotPositions.indexOf(closestDotY);

                // Update the text based on the index
                if (closestIndex !== -1 && closestIndex !== currentLevelIndex) {

                    // --- START: Flow Animation Logic ---
                    handle.classList.add('grabbing'); // --- MOVED HERE ---
                    handle.classList.add('flowing'); // Add class to elongate blue dot
                    clearTimeout(flowTimer); // Clear any existing timer

                    // --- CHANGED: Timer now resets segments too ---
                    flowTimer = setTimeout(() => {
                        handle.classList.remove('flowing');
                        handle.classList.remove('grabbing');
                        // --- THIS IS THE FIX ---
                        // Deactivate all segments when the flow animation ends
                        segments.forEach(seg => seg.classList.remove('active'));
                    }, 400); // Matches the `top` transition duration
                    // --- END: Flow Animation Logic ---

                    // Determine direction (1 for down, -1 for up)
                    const direction = closestIndex > currentLevelIndex ? 1 : -1;
                    const transitionDelay = 200; // Must match CSS transition duration
                    const slideDistance = 15; // How many pixels to slide

                    // 1. Slide and fade out
                    titleEn.style.opacity = 0;
                    titleEn.style.transform = `translateY(${direction * slideDistance}px)`;
                    titleUa.style.opacity = 0;
                    titleUa.style.transform = `translateY(${direction * slideDistance}px)`;

                    // 2. Update current index
                    currentLevelIndex = closestIndex;

                    // --- START: NEW Segment Logic ---
                    // This logic now runs ONLY when the index changes

                    const startIdx = Math.min(previousLevelIndex, currentLevelIndex);
                    const endIdx = Math.max(previousLevelIndex, currentLevelIndex);

                    // Loop through all 6 segments
                    for (let i = 0; i < segments.length; i++) {
                        const segment = segments[i];

                        // Check if this segment index (0-5) is in the active range
                        if (i >= startIdx && i < endIdx) {
                            // This segment is active. Set its position and height *instantly*.
                            segment.style.top = `${dotPositions[i]}px`;
                            segment.style.height = `${dotPositions[i+1] - dotPositions[i]}px`;
                            // Add 'active' class to animate its WIDTH
                            segment.classList.add('active');
                        } else {
                            // This segment is not active.
                            segment.style.height = '0px';
                            segment.classList.remove('active');
                        }
                    }
                    // --- END: NEW Segment Logic ---

                    // --- ADDED: This is the fix for single-segment animation ---
                    // Update previousLevelIndex so the *next* move only animates from this point
                    previousLevelIndex = currentLevelIndex;
                    // --- END: FIX ---

                    // 3. Wait for fade out, then change text and position for fade-in
                    setTimeout(() => {
                        // Change text content
                        // This now correctly maps to the inverted levelData array
                        titleEn.textContent = levelData[currentLevelIndex].en;
                        titleUa.textContent = levelData[currentLevelIndex].ua;

                        // Temporarily disable transition to set the "from" position
                        titleEn.style.transition = 'none';
                        titleUa.style.transition = 'none';

                        // Set "from" position (opposite direction)
                        titleEn.style.transform = `translateY(${-direction * slideDistance}px)`;
                        // --- FIXED TYPO HERE ---
                        titleUa.style.transform = `translateY(${-direction * slideDistance}px)`;

                        // Force the browser to apply the transform immediately
                        titleEn.offsetHeight; // This is a trick to trigger a browser reflow

                        // 4. Re-enable transitions and slide/fade in to final position
                        titleEn.style.transition = 'opacity 0.2s ease-in-out, transform 0.2s ease-in-out';
                        titleUa.style.transition = 'opacity 0.2s ease-in-out, transform 0.2s ease-in-out';

                        titleEn.style.opacity = 1;
                        titleEn.style.transform = 'translateY(0)';
                        titleUa.style.opacity = 1;
                        titleUa.style.transform = 'translateY(0)';

                    }, transitionDelay);
                }
                // --- END: Update Text Logic ---
            }
            // --- MODIFIED: Changed 'else if' to 'if' ---
            if (dragMode === 'horizontal') {
                e.preventDefault(); // Prevent horizontal page swipe
                const screenWidth = window.innerWidth;
                const isRightSide = scroller.classList.contains('right');

                // --- START OF FIX: Set drag distance to (Half Screen - 10px) ---
                const dragDistance = currentX - startX; // Get horizontal drag distance
                const minDrag = (screenWidth / 2) - 10; // Min drag distance is (Half Screen - 10px)

                if (isRightSide && dragDistance < -minDrag) { // Dragged left
                    scroller.classList.remove('right');
                    endDrag(e); // Stop the drag immediately after toggle
                } else if (!isRightSide && dragDistance > minDrag) { // Dragged right
                    scroller.classList.add('right');
                    endDrag(e); // Stop the drag immediately after toggle
                }
                // --- END OF FIX ---
            }
        }

        // --- START OF FIX: Replaced bad code with correct listeners ---
        // --- MODIFIED: Listeners moved to scroller ---
        // These listeners are on the 'scroller' container, which
        // is now back to 9px wide.
        scroller.addEventListener('mousedown', startDrag);
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('mousemove', onDrag);

        // Touch events for mobile
        scroller.addEventListener('touchstart', startDrag);
        document.addEventListener('touchend', endDrag);
        document.addEventListener('touchmove', onDrag);
        // --- END: Scroller Logic ---
    });
</script>
</body>
</html>
